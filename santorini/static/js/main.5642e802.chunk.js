(this.webpackJsonpsantorini=this.webpackJsonpsantorini||[]).push([[0],{19:function(e,t,a){e.exports=a(44)},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a(3),s=a(5),l=a(4),o=a(6),i=a(0),c=a.n(i),u=a(7),h=a.n(u),m=a(8),d=a.n(m);var v=function(e){return!0===e.glowing?c.a.createElement("button",{className:"square glowing",onClick:e.onClick},c.a.createElement("img",{src:e.src,alt:"Polje",width:"100%",height:"100%"})):c.a.createElement("button",{className:"square",onClick:e.onClick},c.a.createElement("img",{src:e.src,alt:"Polje",width:"100%",height:"100%"}))},p=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"connectButtonInput",value:function(){document.getElementById("upload-file").click()}},{key:"render",value:function(){var e=this;return"left"===this.props.side?c.a.createElement("div",{className:this.props.class},c.a.createElement("a",{href:"http://127.0.0.1:8000/home"},c.a.createElement("img",{id:"back-img",width:"100em",height:"100em",src:"/static/images/back-button.png",alt:"back-button"})),c.a.createElement("div",{className:"text-div"},c.a.createElement("ol",null,c.a.createElement("em",null,c.a.createElement("h3",null,"Instructions")),c.a.createElement("li",null,c.a.createElement("b",null,"Click")," on the two of available fields to set builder"),c.a.createElement("li",null,c.a.createElement("b",null,"Click")," on one builder to select, move and build with him on one of the highlighted fields"),c.a.createElement("li",null,c.a.createElement("em",null,c.a.createElement("b",null,"Goal")," is to get to the third floor, good luck!"))))):c.a.createElement("div",{className:this.props.class},c.a.createElement("div",{className:"algorithm-box"},c.a.createElement("fieldset",null,c.a.createElement("legend",null,c.a.createElement("em",null,"Algorithm")),c.a.createElement("select",{id:"algorithm"},c.a.createElement("option",{value:"minimax"},"Minimax"),c.a.createElement("option",{value:"ab"},"\u03b1 - \u03b2"),c.a.createElement("option",{selected:!0,value:"ab-enhanced"},"\u03b1 - \u03b2 enhanced")),c.a.createElement("button",{className:"algorithm-button",onClick:this.props.algorithmFun},"Choose algorithm")),c.a.createElement("fieldset",null,c.a.createElement("legend",null,c.a.createElement("em",null,"Depth")," ",c.a.createElement("b",null,c.a.createElement("span",{id:"graph-depth"},"4"))),c.a.createElement("button",{className:"algorithm-button",onClick:this.props.increaseFun},"+"),"\xa0",c.a.createElement("button",{className:"algorithm-button",onClick:this.props.decreaseFun},"-"))),c.a.createElement("div",{className:"text-div"},c.a.createElement("button",{onClick:function(){return e.connectButtonInput()},className:"algorithm-button"},"Import"),c.a.createElement("input",{id:"upload-file",onChange:this.props.importState,type:"file",hidden:!0}),"\xa0",c.a.createElement("button",{onClick:this.props.exportState,className:"algorithm-button"},"Export"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("span",null," ",c.a.createElement("em",null,"Moves:")," ")," ",c.a.createElement("br",null)," ",c.a.createElement("br",null),c.a.createElement("div",{id:"moves"})))}}]),t}(c.a.Component),f="http://127.0.0.1:8000/getAvailableMoves/",g=!1,E=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={cells:Array(25).fill(0),firstHE:-1,secondHE:-1,firstJU:-1,secondJU:-1,availableMovesOrBuilds:[],minNext:!0},a.serverAiMoveURL="http://127.0.0.1:8000/alphaBetaCustom/",a.whoseMove="Jupiter's move",a.movesCount=0,a.depth=4,a.start=!1,a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){window.confirm("Start the Skynet?")&&this.setUpAIBuilders()}},{key:"nextMove",value:function(){this.doMoveAI(this.serverAiMoveURL,this.depth)}},{key:"changeUrl",value:function(){switch(document.getElementById("algorithm").value){case"minimax":this.serverAiMoveURL="http://127.0.0.1:8000/minimax/";break;case"ab":this.serverAiMoveURL="http://127.0.0.1:8000/alphaBeta/";break;case"ab-enhanced":default:this.serverAiMoveURL="http://127.0.0.1:8000/alphaBetaCustom/"}alert("Successfully changed algorithm for AI!")}},{key:"canGoDeeper",value:function(){this.movesCount>=30&&(this.depth=5),this.movesCount>=55&&(this.depth=6),this.movesCount>=70&&(this.depth=7)}},{key:"clickHandle",value:function(e){alert("Game in progress, AI vs AI, you cannot do anything to stop them. >:D")}},{key:"doMoveAI",value:function(e,t){var a=this;this.checkWin(),this.changeMoveUI(),g||this.getAIMoveFromServer(e,t).then((function(e){var t,n=e.data.id,r=5*e.data.move[0]+e.data.move[1],s=5*e.data.build[0]+e.data.build[1];switch(n){case 1:t=a.state.firstHE;break;case 2:t=a.state.secondHE;break;case 3:t=a.state.firstJU;break;case 4:t=a.state.secondJU;break;default:t=null}a.moveFigure(t,r),a.buildBlock(s),a.checkWin(),a.changeMoveUI()}))}},{key:"getAIMoveFromServer",value:function(e,t){var a,n,r;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=this.state.cells.slice().map((function(e){return e>=9?(e+1)%5:e>=5?e%5:e})),n=[{cells:a,firstHE:this.state.firstHE,secondHE:this.state.secondHE,firstJU:this.state.firstJU,secondJU:this.state.secondJU,minNext:this.state.minNext,startPosition:null,depth:t}],s.next=4,h.a.awrap(d.a.post(e,n).catch((function(e){console.log(e)})));case 4:return r=s.sent,s.abrupt("return",r);case 6:case"end":return s.stop()}}),null,this)}},{key:"setUpAIBuilders",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=[],s=0;s<4;){var l=Math.floor(24*Math.random());-1===r.indexOf(l)&&(r.push(l),s++)}var o=-1===e?r[0]:e,i=-1===t?r[2]:t,c=-1===a?r[1]:a,u=-1===n?r[3]:n,h=this.state.cells.slice();h[o]=5,h[i]=5,h[c]=9,h[u]=9,this.logSetupUI(o,0),this.logSetupUI(i,1),this.logSetupUI(c,2),this.logSetupUI(u,3),this.setState({firstHE:o,secondHE:i,firstJU:c,secondJU:u,cells:h})}},{key:"setupAvailableMoves",value:function(e,t){var a=this;this.getMovesFromServer(e,t).then((function(e){return a.setState({availableMovesOrBuilds:e})}))}},{key:"getMovesFromServer",value:function(e,t){var a,n,r;return h.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=this.state.cells.slice().map((function(e){return e>=9?(e+1)%5:e>=5?e%5:e})),n=[{cells:a,firstHE:this.state.firstHE,secondHE:this.state.secondHE,firstJU:this.state.firstJU,secondJU:this.state.secondJU,startPosition:[Math.floor(e/5),e%5],depth:null}],s.next=4,h.a.awrap(d.a.post(t,n).catch((function(e){console.log(e)})));case 4:return r=s.sent,s.abrupt("return",r.data.moves.map((function(e){return 5*e[0]+e[1]})));case 6:case"end":return s.stop()}}),null,this)}},{key:"moveFigure",value:function(e,t,a){var n=Math.floor((this.state.cells[e]+1)/5),r=this.state.cells.slice(),s=r[e];r[e]=s>=9?(r[e]+1)%5:r[e]%5,r[t]=s>=9?5*n+r[t]-1:5*n+r[t],this.logMoveUI(e,!1),this.logMoveUI(t,!1),this.setState({firstHE:this.state.firstHE===e?t:this.state.firstHE,secondHE:this.state.secondHE===e?t:this.state.secondHE,firstJU:this.state.firstJU===e?t:this.state.firstJU,secondJU:this.state.secondJU===e?t:this.state.secondJU,cells:r},a),this.movesCount++,this.canGoDeeper()}},{key:"buildBlock",value:function(e){var t=this.state.cells.slice();t[e]+=1,this.logMoveUI(e,!0),this.setState({cells:t,minNext:!this.state.minNext})}},{key:"checkWin",value:function(){var e=this.state.cells.findIndex((function(e){return 12===e||8===e}));if(-1!==e){switch(this.state.cells[e]){case 8:alert("Hercules won!");break;case 12:alert("Jupiter won!")}return g=!0,void(window.confirm("Do you want to play another game?")&&window.location.reload())}var t=this.state.firstJU,a=this.state.secondJU,n=this.state.firstHE,r=this.state.secondHE;0===this.getMovesFromServer(t,f).length&&0===this.getMovesFromServer(a,f).length?(g=!0,alert("Hercules won!")):0===this.getMovesFromServer(n,f).length&&0===this.getMovesFromServer(r,f).length&&(g=!0,alert("Jupiter won!")),g&&window.confirm("Do you want to play another game?")&&window.location.reload()}},{key:"downloadState",value:function(){var e=document.getElementById("moves").innerHTML;e=e.replace(/\s?<br>\s?/g,"\n"),e+="\n";var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download","game_state.txt"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},{key:"loadState",value:function(e){var t=this;if(-1===this.state.firstJU){var a=new FileReader;a.onload=function(e){return t.loadMoves(e)},a.readAsText(e.target.files[0])}else window.confirm("You must refresh page before importing a game state.\nRefresh now?")&&window.location.reload()}},{key:"loadMoves",value:function(e){var t=e.target.result.trim().split("\n");this.setUpBuildersFromImport(t),this.doMovesFromImport(t)}},{key:"doMovesFromImport",value:function(e){for(;0!==e.length;){var t=e.shift().split(" "),a=this.convertCoordinatesImport(t[0]),n=this.convertCoordinatesImport(t[1]),r=this.convertCoordinatesImport(t[2]);this.moveFigure(a,n),this.buildBlock(r)}}},{key:"setUpBuildersFromImport",value:function(e){var t=e.shift().split(" "),a=this.convertCoordinatesImport(t[0]),n=this.convertCoordinatesImport(t[1]),r=e.shift().split(" "),s=this.convertCoordinatesImport(r[0]),l=this.convertCoordinatesImport(r[1]);this.setUpAIBuilders(a,n,s,l)}},{key:"convertCoordinatesImport",value:function(e){var t=e[0],a=parseInt(e[1])-1;switch(t){case"A":t=0;break;case"B":t=1;break;case"C":t=2;break;case"D":t=3;break;case"E":t=4}return 5*t+a}},{key:"incDepth",value:function(){this.depth++,this.updateDepthUI()}},{key:"decDepth",value:function(){1!==this.depth&&(this.depth--,this.updateDepthUI())}},{key:"convertCoordinatesOut",value:function(e){var t=e%5,a="";switch(Math.floor(e/5)){case 0:a+="A";break;case 1:a+="B";break;case 2:a+="C";break;case 3:a+="D";break;case 4:a+="E"}return a+=String(t+1)+" "}},{key:"logMoveUI",value:function(e,t){var a=document.getElementById("moves"),n=this.convertCoordinatesOut(e);t&&(n+="<br>"),a.innerHTML+=n}},{key:"logSetupUI",value:function(e,t){var a=document.getElementById("moves"),n=this.convertCoordinatesOut(e);switch(t){case 1:case 3:n+="<br>"}a.innerHTML+=n}},{key:"updateDepthUI",value:function(){document.getElementById("graph-depth").textContent=this.depth}},{key:"changeMoveUI",value:function(){switch(this.state.minNext){case!1:this.whoseMove="Hercules's move";break;case!0:this.whoseMove="Jupiter's move"}document.getElementsByClassName("who-move")[0].textContent=this.whoseMove}},{key:"render",value:function(){var e=this,t=this.state.cells.map((function(t){return e.getImageSourceCell(t)}));return c.a.createElement("div",{className:"main-div"},c.a.createElement(p,{side:"left",class:"left-panel"}),c.a.createElement("div",{className:"board"},c.a.createElement("div",{className:"first-row"},c.a.createElement("div",{className:"column-number-cell"},"1"),c.a.createElement("div",{className:"column-number-cell"},"2"),c.a.createElement("div",{className:"column-number-cell"},"3"),c.a.createElement("div",{className:"column-number-cell"},"4"),c.a.createElement("div",{className:"column-number-cell"},"5")),c.a.createElement("div",{className:"board-row"},c.a.createElement("span",{className:"row-number-cell"},"A"),this.renderSquare(t[0],0),this.renderSquare(t[1],1),this.renderSquare(t[2],2),this.renderSquare(t[3],3),this.renderSquare(t[4],4)),c.a.createElement("div",{className:"board-row"},c.a.createElement("span",{className:"row-number-cell"},"B"),this.renderSquare(t[5],5),this.renderSquare(t[6],6),this.renderSquare(t[7],7),this.renderSquare(t[8],8),this.renderSquare(t[9],9)),c.a.createElement("div",{className:"board-row"},c.a.createElement("span",{className:"row-number-cell"},"C"),this.renderSquare(t[10],10),this.renderSquare(t[11],11),this.renderSquare(t[12],12),this.renderSquare(t[13],13),this.renderSquare(t[14],14)),c.a.createElement("div",{className:"board-row"},c.a.createElement("span",{className:"row-number-cell"},"D"),this.renderSquare(t[15],15),this.renderSquare(t[16],16),this.renderSquare(t[17],17),this.renderSquare(t[18],18),this.renderSquare(t[19],19)),c.a.createElement("div",{className:"board-row"},c.a.createElement("span",{className:"row-number-cell"},"E"),this.renderSquare(t[20],20),this.renderSquare(t[21],21),this.renderSquare(t[22],22),this.renderSquare(t[23],23),this.renderSquare(t[24],24)),c.a.createElement("button",{onClick:function(){return e.nextMove()},className:"who-move"},this.whoseMove," [CLICK TO BEGIN]")),c.a.createElement(p,{side:"right",algorithmFun:function(){return e.changeUrl()},increaseFun:function(){return e.incDepth()},decreaseFun:function(){return e.decDepth()},class:"right-panel",importState:function(t){return e.loadState(t)},exportState:function(){return e.downloadState()}}))}},{key:"getImageSourceCell",value:function(e){switch(e){case 0:return"lvl_0.jpg";case 1:return"lvl_1.png";case 2:return"lvl_2.png";case 3:return"lvl_3.png";case 4:return"lvl_4.png";case 5:return"hercules.png";case 6:return"lvl_1_HE.png";case 7:return"lvl_2_HE.png";case 8:return"lvl_3_HE.png";case 9:return"jupiter.png";case 10:return"lvl_1_JU.png";case 11:return"lvl_2_JU.png";case 12:return"lvl_3_JU.png";default:return""}}},{key:"renderSquare",value:function(e,t){var a,n=this,r=null!=(null===(a=this.state.availableMovesOrBuilds)||void 0===a?void 0:a.find((function(e){return e===t})));return c.a.createElement(v,{src:"../images/".concat(e),onClick:function(){return n.clickHandle(t)},glowing:r})}}]),t}(c.a.Component),b=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(E,{human:"JU"})}}]),t}(c.a.Component),k=a(18),w=a.n(k);a(43);w.a.render(c.a.createElement(b,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.5642e802.chunk.js.map