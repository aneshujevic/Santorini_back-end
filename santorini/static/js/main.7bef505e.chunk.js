(this.webpackJsonpsantorini=this.webpackJsonpsantorini||[]).push([[0],{19:function(e,t,a){e.exports=a(44)},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a(3),r=a(5),i=a(4),l=a(6),o=a(0),c=a.n(o),u=a(7),h=a.n(u),d=a(8),m=a.n(d);var v=function(e){return!0===e.glowing?c.a.createElement("button",{className:"square glowing",onClick:e.onClick},c.a.createElement("img",{src:e.src,alt:"Polje",width:"100%",height:"100%"})):c.a.createElement("button",{className:"square",onClick:e.onClick},c.a.createElement("img",{src:e.src,alt:"Polje",width:"100%",height:"100%"}))},p=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"connectButtonInput",value:function(){document.getElementById("upload-file").click()}},{key:"render",value:function(){var e=this;return"left"===this.props.side?c.a.createElement("div",{className:this.props.class},c.a.createElement("a",{href:"http://127.0.0.1:8000/home"},c.a.createElement("img",{id:"back-img",width:"100em",height:"100em",src:"/static/images/back-button.png",alt:"back-button"})),c.a.createElement("div",{className:"text-div"},c.a.createElement("ol",null,c.a.createElement("em",null,c.a.createElement("h3",null,"Instructions")),c.a.createElement("li",null,c.a.createElement("b",null,"Click")," on the two of available fields to set builder"),c.a.createElement("li",null,c.a.createElement("b",null,"Click")," on one builder to select, move and build with him on one of the highlighted fields"),c.a.createElement("li",null,c.a.createElement("em",null,c.a.createElement("b",null,"Goal")," is to get to the third floor, good luck!"))))):c.a.createElement("div",{className:this.props.class},c.a.createElement("div",{className:"algorithm-box"},c.a.createElement("fieldset",null,c.a.createElement("legend",null,c.a.createElement("em",null,"Algorithm")),c.a.createElement("select",{id:"algorithm",defaultValue:"ab-enhanced"},c.a.createElement("option",{value:"minimax"},"Minimax"),c.a.createElement("option",{value:"ab"},"\u03b1 - \u03b2"),c.a.createElement("option",{value:"ab-enhanced"},"\u03b1 - \u03b2 enhanced")),c.a.createElement("button",{className:"algorithm-button",onClick:this.props.algorithmFun},"Choose algorithm")),c.a.createElement("fieldset",null,c.a.createElement("legend",null,c.a.createElement("em",null,"Depth")," ",c.a.createElement("b",null,c.a.createElement("span",{id:"graph-depth"},"4"))),c.a.createElement("button",{className:"algorithm-button",onClick:this.props.increaseFun},"+"),"\xa0",c.a.createElement("button",{className:"algorithm-button",onClick:this.props.decreaseFun},"-"))),c.a.createElement("div",{className:"text-div"},c.a.createElement("button",{onClick:function(){return e.connectButtonInput()},className:"algorithm-button"},"Import"),c.a.createElement("input",{id:"upload-file",onChange:this.props.importState,type:"file",hidden:!0}),"\xa0",c.a.createElement("button",{onClick:this.props.exportState,className:"algorithm-button"},"Export"),c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("span",null," ",c.a.createElement("em",null,"Moves:")," ")," ",c.a.createElement("br",null)," ",c.a.createElement("br",null),c.a.createElement("div",{id:"moves"})))}}]),t}(c.a.Component),f="http://127.0.0.1:8000/getAvailableMoves/",b=!1,g=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).state={cells:Array(25).fill(0),firstHE:-1,secondHE:-1,firstJU:-1,secondJU:-1,availableMovesOrBuilds:[],humanNext:!0},a.humanPlayer=e.human,a.chooseMove=!1,a.moving=!1,a.building=!1,a.buildersSetUp=0,a.lastClickedId=-1,a.serverAiMoveURL="http://127.0.0.1:8000/alphaBetaCustom/",a.whoseMove="Jupiter's move",a.upperBoundCellValue=12,a.lowerBoundCellValue=9,a.movesCount=0,a.depth=4,a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"changeUrl",value:function(){switch(document.getElementById("algorithm").value){case"minimax":this.serverAiMoveURL="http://127.0.0.1:8000/minimax/";break;case"ab":this.serverAiMoveURL="http://127.0.0.1:8000/alphaBeta/";break;case"ab-enhanced":default:this.serverAiMoveURL="http://127.0.0.1:8000/alphaBetaCustom/"}alert("Successfully changed algorithm for AI!")}},{key:"canGoDeeper",value:function(){this.movesCount>=30&&(this.depth=5),this.movesCount>=55&&(this.depth=6),this.movesCount>=70&&(this.depth=7)}},{key:"clickHandle",value:function(e){var t=this;if(!b&&!0===this.state.humanNext){if(this.buildersSetUp<2)return this.setUpBuilders(e),void(2===this.buildersSetUp&&this.setUpAIBuilders());if(this.lowerBoundCellValue<=this.state.cells[e]&&this.state.cells[e]<=this.upperBoundCellValue&&(!1===this.moving&&!1===this.building&&e!==this.lastClickedId&&-1===this.lastClickedId?(this.lastClickedId=e,this.chooseMove=!0):e===this.lastClickedId&&!1===this.building&&(this.chooseMove=!1,this.moving=!1,this.lastClickedId=-1,this.setState({availableMovesOrBuilds:null}))),!0===this.chooseMove&&(this.lastClickedId===e?this.setupAvailableMoves(e,f):(this.chooseMove=!1,this.moving=!0)),!0===this.moving&&null!=this.state.availableMovesOrBuilds.find((function(t){return t===e})))return this.moveFigure(this.lastClickedId,e,(function(){return t.setupAvailableMoves(e,"http://127.0.0.1:8000/getAvailableBuilds/")})),this.lastClickedId=-1,this.moving=!1,void(this.building=!0);!0===this.building&&null!=this.state.availableMovesOrBuilds.find((function(t){return t===e}))&&(this.buildBlock(e),this.building=!1,this.setState({availableMovesOrBuilds:null,humanNext:!1},(function(){return t.doMoveAI(t.serverAiMoveURL,t.depth)})))}}},{key:"doMoveAI",value:function(e,t){var a=this;this.checkWin(),this.changeMoveUI(),b||this.getAIMoveFromServer(e,t).then((function(e){var t,n=e.data.id,s=5*e.data.move[0]+e.data.move[1],r=5*e.data.build[0]+e.data.build[1];switch(n){case 1:t=a.state.firstHE;break;case 2:t=a.state.secondHE;break;default:t=null}a.moveFigure(t,s),a.buildBlock(r),a.checkWin(),a.changeMoveUI()}))}},{key:"getAIMoveFromServer",value:function(e,t){var a,n,s;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a=this.state.cells.slice().map((function(e){return e>=9?(e+1)%5:e>=5?e%5:e})),n=[{cells:a,firstHE:this.state.firstHE,secondHE:this.state.secondHE,firstJU:this.state.firstJU,secondJU:this.state.secondJU,startPosition:null,depth:t}],r.next=4,h.a.awrap(m.a.post(e,n).catch((function(e){console.log(e)})));case 4:return s=r.sent,r.abrupt("return",s);case 6:case"end":return r.stop()}}),null,this)}},{key:"setUpBuilders",value:function(e){var t=this,a=this.state.cells;0===a[e]?(a[e]=9,this.logSetupUI(e,this.buildersSetUp),this.setState({cells:a,firstJU:0===this.buildersSetUp?e:this.state.firstJU,secondJU:1===this.buildersSetUp?e:this.state.secondJU},(function(){return 2===++t.buildersSetUp?t.setUpAIBuilders():null}))):alert("Field is taken, please try again..")}},{key:"setUpAIBuilders",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=this.state.firstJU,n=this.state.secondJU,s=0,r=0,i=[7,6,8],l=[17,18,19],o=0;o<3&&(i[o]!==a&&i[o]!==n&&0===s&&(s=i[o]),l[o]!==a&&l[o]!==n&&0===r&&(r=l[o]),!s||!r);o++);-1!==e&&-1!==t&&(s=e,r=t);var c=this.state.cells.slice();c[s]=5,c[r]=5,this.logSetupUI(s,2),this.logSetupUI(r,3),this.setState({firstHE:s,secondHE:r,cells:c})}},{key:"setupAvailableMoves",value:function(e,t){var a=this;this.getMovesFromServer(e,t).then((function(e){return a.setState({availableMovesOrBuilds:e})}))}},{key:"getMovesFromServer",value:function(e,t){var a,n,s;return h.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a=this.state.cells.slice().map((function(e){return e>=9?(e+1)%5:e>=5?e%5:e})),n=[{cells:a,firstHE:this.state.firstHE,secondHE:this.state.secondHE,firstJU:this.state.firstJU,secondJU:this.state.secondJU,startPosition:[Math.floor(e/5),e%5],depth:null}],r.next=4,h.a.awrap(m.a.post(t,n).catch((function(e){console.log(e)})));case 4:return s=r.sent,r.abrupt("return",s.data.moves.map((function(e){return 5*e[0]+e[1]})));case 6:case"end":return r.stop()}}),null,this)}},{key:"moveFigure",value:function(e,t,a){var n=Math.floor((this.state.cells[e]+1)/5),s=this.state.cells.slice(),r=s[e];s[e]=r>=9?(s[e]+1)%5:s[e]%5,s[t]=r>=9?5*n+s[t]-1:5*n+s[t],this.logMoveUI(e,!1),this.logMoveUI(t,!1),this.setState({firstHE:this.state.firstHE===e?t:this.state.firstHE,secondHE:this.state.secondHE===e?t:this.state.secondHE,firstJU:this.state.firstJU===e?t:this.state.firstJU,secondJU:this.state.secondJU===e?t:this.state.secondJU,cells:s},a),this.movesCount++,this.canGoDeeper()}},{key:"buildBlock",value:function(e){var t=this.state.cells.slice();t[e]+=1,this.logMoveUI(e,!0),this.setState({cells:t,humanNext:!this.state.humanNext})}},{key:"checkWin",value:function(){var e=this.state.cells.findIndex((function(e){return 12===e||8===e}));if(-1!==e){switch(this.state.cells[e]){case 8:alert("AI won!");break;case 12:alert("Human won!")}return b=!0,void(window.confirm("Do you want to play another game?")&&window.location.reload())}var t=this.state.firstJU,a=this.state.secondJU,n=this.state.firstHE,s=this.state.secondHE;0===this.getMovesFromServer(t,f).length&&0===this.getMovesFromServer(a,f).length?(b=!0,alert("AI won!")):0===this.getMovesFromServer(n,f).length&&0===this.getMovesFromServer(s,f).length&&(b=!0,alert("Human won!")),b&&window.confirm("Do you want to play another game?")&&window.location.reload()}},{key:"downloadState",value:function(){var e=document.getElementById("moves").innerHTML;e=e.replace(/\s?<br>\s?/g,"\n"),e+="\n";var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),t.setAttribute("download","game_state.txt"),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},{key:"loadState",value:function(e){var t=this;if(-1===this.state.firstJU){var a=new FileReader;a.onload=function(e){return t.loadMoves(e)},a.readAsText(e.target.files[0])}else window.confirm("You must refresh page before importing a game state.\nRefresh now?")&&window.location.reload()}},{key:"loadMoves",value:function(e){var t=e.target.result.trim().split("\n");this.setUpBuildersFromImport(t),this.doMovesFromImport(t)}},{key:"doMovesFromImport",value:function(e){for(;0!==e.length;){var t=e.shift().split(" "),a=this.convertCoordinatesImport(t[0]),n=this.convertCoordinatesImport(t[1]),s=this.convertCoordinatesImport(t[2]);this.moveFigure(a,n),this.buildBlock(s)}}},{key:"setUpBuildersFromImport",value:function(e){for(var t=0;t<2;t++){var a=e.shift().split(" "),n=this.convertCoordinatesImport(a[0]),s=this.convertCoordinatesImport(a[1]);t<1?(this.setUpBuilders(n),this.setUpBuilders(s)):this.setUpAIBuilders(n,s)}}},{key:"convertCoordinatesImport",value:function(e){var t=e[0],a=parseInt(e[1])-1;switch(t){case"A":t=0;break;case"B":t=1;break;case"C":t=2;break;case"D":t=3;break;case"E":t=4}return 5*t+a}},{key:"incDepth",value:function(){this.depth++,this.updateDepthUI()}},{key:"decDepth",value:function(){1!==this.depth&&(this.depth--,this.updateDepthUI())}},{key:"updateDepthUI",value:function(){document.getElementById("graph-depth").textContent=this.depth}},{key:"logMoveUI",value:function(e,t){var a=document.getElementById("moves"),n=this.convertCoordinatesExport(e);t&&(n+="<br>"),a.innerHTML+=n}},{key:"logSetupUI",value:function(e,t){var a=document.getElementById("moves"),n=this.convertCoordinatesExport(e);switch(t){case 1:case 3:n+="<br>"}a.innerHTML+=n}},{key:"convertCoordinatesExport",value:function(e){var t=e%5,a="";switch(Math.floor(e/5)){case 0:a+="A";break;case 1:a+="B";break;case 2:a+="C";break;case 3:a+="D";break;case 4:a+="E";break;default:return}return a+=String(t+1)+" "}},{key:"changeMoveUI",value:function(){switch(this.state.humanNext){case!1:this.whoseMove="Hercules's move";break;case!0:this.whoseMove="Jupiter's move";break;default:return}document.getElementsByClassName("who-move")[0].textContent=this.whoseMove}},{key:"render",value:function(){var e=this,t=this.state.cells.map((function(t){return e.getImageSourceCell(t)}));return c.a.createElement("div",{className:"main-div"},c.a.createElement(p,{side:"left",class:"left-panel"}),c.a.createElement("div",{className:"board"},c.a.createElement("div",{className:"first-row"},c.a.createElement("div",{className:"column-number-cell"},"1"),c.a.createElement("div",{className:"column-number-cell"},"2"),c.a.createElement("div",{className:"column-number-cell"},"3"),c.a.createElement("div",{className:"column-number-cell"},"4"),c.a.createElement("div",{className:"column-number-cell"},"5")),c.a.createElement("div",{className:"board-row"},c.a.createElement("span",{className:"row-number-cell"},"A"),this.renderSquare(t[0],0),this.renderSquare(t[1],1),this.renderSquare(t[2],2),this.renderSquare(t[3],3),this.renderSquare(t[4],4)),c.a.createElement("div",{className:"board-row"},c.a.createElement("span",{className:"row-number-cell"},"B"),this.renderSquare(t[5],5),this.renderSquare(t[6],6),this.renderSquare(t[7],7),this.renderSquare(t[8],8),this.renderSquare(t[9],9)),c.a.createElement("div",{className:"board-row"},c.a.createElement("span",{className:"row-number-cell"},"C"),this.renderSquare(t[10],10),this.renderSquare(t[11],11),this.renderSquare(t[12],12),this.renderSquare(t[13],13),this.renderSquare(t[14],14)),c.a.createElement("div",{className:"board-row"},c.a.createElement("span",{className:"row-number-cell"},"D"),this.renderSquare(t[15],15),this.renderSquare(t[16],16),this.renderSquare(t[17],17),this.renderSquare(t[18],18),this.renderSquare(t[19],19)),c.a.createElement("div",{className:"board-row"},c.a.createElement("span",{className:"row-number-cell"},"E"),this.renderSquare(t[20],20),this.renderSquare(t[21],21),this.renderSquare(t[22],22),this.renderSquare(t[23],23),this.renderSquare(t[24],24)),c.a.createElement("span",{className:"who-move"},this.whoseMove)),c.a.createElement(p,{side:"right",algorithmFun:function(){return e.changeUrl()},increaseFun:function(){return e.incDepth()},decreaseFun:function(){return e.decDepth()},importState:function(t){return e.loadState(t)},exportState:function(){return e.downloadState()},class:"right-panel"}))}},{key:"getImageSourceCell",value:function(e){switch(e){case 0:return"lvl_0.jpg";case 1:return"lvl_1.png";case 2:return"lvl_2.png";case 3:return"lvl_3.png";case 4:return"lvl_4.png";case 5:return"hercules.png";case 6:return"lvl_1_HE.png";case 7:return"lvl_2_HE.png";case 8:return"lvl_3_HE.png";case 9:return"jupiter.png";case 10:return"lvl_1_JU.png";case 11:return"lvl_2_JU.png";case 12:return"lvl_3_JU.png";default:return""}}},{key:"renderSquare",value:function(e,t){var a,n=this,s=null!=(null===(a=this.state.availableMovesOrBuilds)||void 0===a?void 0:a.find((function(e){return e===t})));return c.a.createElement(v,{src:"../images/".concat(e),onClick:function(){return n.clickHandle(t)},glowing:s})}}]),t}(c.a.Component),E=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return c.a.createElement(g,{human:"JU"})}}]),t}(c.a.Component),k=a(18),U=a.n(k);a(43);U.a.render(c.a.createElement(E,null),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.7bef505e.chunk.js.map